<!DOCTYPE html>
<html lang="zh-CN" style="background: url(bg.png) center;background-size: cover;background-attachment: fixed;background-color: #0b1220;">
<head>
    <link rel="icon" href="logo.jpg" type="image/jpg">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>烟花特效</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="margin:0;overflow:hidden;background:none;">
    <canvas id="fw" style="display:block;width:100vw;height:100vh;"></canvas>
    <div style="position:fixed;left:50%;top:24px;transform:translateX(-50%);z-index:2;">
        <button id="back" class="btn btn--opt" type="button">返回首页</button>
    </div>
    <script>
    (function(){
        var cvs = document.getElementById('fw');
        var ctx = cvs.getContext('2d');
        var dpr = Math.max(1, Math.floor(window.devicePixelRatio || 1));
        function resize(){
            var w = window.innerWidth, h = window.innerHeight;
            cvs.width = w * dpr; cvs.height = h * dpr;
            cvs.style.width = w + 'px'; cvs.style.height = h + 'px';
            ctx.setTransform(dpr,0,0,dpr,0,0);
        }
        resize(); window.addEventListener('resize', resize);

        var grav = 0.08;
        var rockets = [];
        var particles = [];
        function rand(a,b){ return a + Math.random()*(b-a); }
        function Rocket(){
            var w = cvs.width/dpr, h = cvs.height/dpr;
            this.x = rand(w*0.15, w*0.85);
            this.y = h + rand(10, 60);
            this.vx = rand(-0.6, 0.6);
            this.vy = rand(-8.5, -11.5);
            this.color = 'hsl('+Math.floor(Math.random()*360)+',90%,60%)';
            this.life = rand(0.8, 1.2);
            this.t = 0;
        }
        function spawnParticles(x,y,color){
            var count = 90 + Math.floor(Math.random()*40);
            for(var i=0;i<count;i++){
                var ang = Math.random()*Math.PI*2;
                var spd = rand(1.2, 4.2);
                particles.push({
                    x:x, y:y, vx:Math.cos(ang)*spd, vy:Math.sin(ang)*spd,
                    alpha:1, decay:rand(0.008,0.018), size:rand(1.2,2.4), color:color
                });
            }
        }
        function step(){
            var w = cvs.width/dpr, h = cvs.height/dpr;
            ctx.fillStyle = 'rgba(10,16,28,0.25)'; ctx.fillRect(0,0,w,h);
            if(Math.random()<0.05 && rockets.length<6) rockets.push(new Rocket());
            for(var i=rockets.length-1;i>=0;i--){
                var r = rockets[i];
                r.t += 0.016; r.x += r.vx; r.y += r.vy; r.vy += grav;
                ctx.beginPath(); ctx.arc(r.x,r.y,2.2,0,Math.PI*2); ctx.fillStyle=r.color; ctx.fill();
                if(r.vy >= -1 || r.t >= r.life){ spawnParticles(r.x,r.y,r.color); rockets.splice(i,1); }
            }
            for(var j=particles.length-1;j>=0;j--){
                var p = particles[j];
                p.vy += grav*0.25; p.x += p.vx; p.y += p.vy; p.alpha -= p.decay;
                if(p.alpha<=0 || p.y>h+20){ particles.splice(j,1); continue; }
                ctx.globalAlpha = Math.max(0, p.alpha);
                ctx.fillStyle = p.color; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill(); ctx.globalAlpha = 1;
            }
            requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
        document.getElementById('back').addEventListener('click', function(){ window.location='index.html'; });
    })();
    </script>
    <script src="jq.min.js"></script>
    <script src="scroll.js"></script>
    <script src="tracker.js"></script>
</body>
</html>

